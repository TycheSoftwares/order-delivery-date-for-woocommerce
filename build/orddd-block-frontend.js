(()=>{var e={184:(e,t)=>{var d;!function(){"use strict";var a={}.hasOwnProperty;function r(){for(var e=[],t=0;t<arguments.length;t++){var d=arguments[t];if(d){var o=typeof d;if("string"===o||"number"===o)e.push(d);else if(Array.isArray(d)&&d.length){var l=r.apply(null,d);l&&e.push(l)}else if("object"===o)for(var i in d)a.call(d,i)&&d[i]&&e.push(i)}}return e.join(" ")}e.exports?(r.default=r,e.exports=r):void 0===(d=function(){return r}.apply(t,[]))||(e.exports=d)}()},196:e=>{"use strict";e.exports=window.React},554:e=>{"use strict";e.exports=window.wc.blocksCheckout},609:e=>{"use strict";e.exports=window.wp.components},736:e=>{"use strict";e.exports=window.wp.i18n},962:e=>{"use strict";e.exports=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":2,"name":"order-delivery-date/delivery-date","version":"1.0.1","title":"Order Delivery Date","category":"woocommerce","parent":["woocommerce/checkout-shipping-address-block"],"attributes":{"lock":{"type":"object","default":{"remove":true,"move":true}}},"textdomain":"order-delivery-date","editorScript":"file:./build/index.js"}')}},t={};function d(a){var r=t[a];if(void 0!==r)return r.exports;var o=t[a]={exports:{}};return e[a](o,o.exports,d),o.exports}d.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return d.d(t,{a:t}),t},d.d=(e,t)=>{for(var a in t)d.o(t,a)&&!d.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},d.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=d(962),t=d(554),a=d(736),r=d(196);const o=window.wp.element,l=window.wp.data,s=window.wc.wcBlocksData,n=(window.wc.wcSettings,({checkoutData:e,shippingMethod:d,updateSession:i,setLoading:n})=>{const[c,_]=(0,o.useState)(""),[u,m]=(0,o.useState)(!0),[v,p]=(0,o.useState)((0,a.__)("Delivery Date","order-delivery-date")),{setExtensionData:y}=e,{setValidationErrors:h,clearValidationError:g}=(0,l.useDispatch)(s.VALIDATION_STORE_KEY),[f,w]=(0,o.useState)(!0),[b,S]=(0,o.useState)((0,a.__)("Choose a Date","order-delivery-date"));(0,o.useEffect)((()=>{w(orddd_lite_params.is_enable_delivery_date),p(orddd_lite_params.orddd_lite_delivery_date_field_label),_(localStorage.getItem("orddd_deliverydate_lite_session")),y("order-delivery-date","e_deliverydate",c),y("order-delivery-date","h_deliverydate",localStorage.getItem("h_deliverydate_lite_session")),m("checked"===orddd_lite_params.orddd_lite_date_field_mandatory),S(orddd_lite_params.orddd_lite_delivery_date_field_placeholder),f&&(jQuery(document).on("change","#e_deliverydate",(function(e){_(e.target.value),y("order-delivery-date","e_deliverydate",e.target.value),y("order-delivery-date","h_deliverydate",localStorage.getItem("h_deliverydate_lite_session")),n(!0),(0,t.extensionCartUpdate)({namespace:"order-delivery-date",data:{e_deliverydate:e.target.value,h_deliverydate:localStorage.getItem("h_deliverydate_lite_session")}}).then((()=>{n(!1)}))})),jQuery(document).on("change","#orddd_lite_datepicker",(function(e){_(e.target.value),y("order-delivery-date","e_deliverydate",e.target.value),y("order-delivery-date","h_deliverydate",localStorage.getItem("h_deliverydate_lite_session")),n(!0),(0,t.extensionCartUpdate)({namespace:"order-delivery-date",data:{e_deliverydate:e.target.value,h_deliverydate:localStorage.getItem("h_deliverydate_lite_session")}}).then((()=>{n(!1)}))})),jQuery(document).on("orddd_on_clear_text",(function(){n(!0),(0,t.extensionCartUpdate)({namespace:"order-delivery-date",data:{e_deliverydate:"",h_deliverydate:""}}).then((()=>{localStorage.setItem("h_deliverydate_lite_session",""),localStorage.setItem("orddd_deliverydate_lite_session",""),_(""),n(!1)}))})),u&&""===c?h({e_deliverydate:{message:(0,a.__)("Please select a delivery date","order-delivery-date"),hidden:!1}}):g("e_deliverydate"))}),[y,c,u,f,_,d,i,h,g]);const{validationError:k}=(0,l.useSelect)((e=>({validationError:e("wc/store/validation").getValidationError("e_deliverydate")}))),E=(0,o.useCallback)((e=>{_(e),y("order-delivery-date","e_deliverydate",e),y("order-delivery-date","h_deliverydate",localStorage.getItem("h_deliverydate_lite_session"))}),[_.setExtensionData]);return(0,r.createElement)("div",{style:{display:f?"block":"none"}},(0,r.createElement)(t.ValidatedTextInput,{id:"e_deliverydate",errorId:"e_deliverydate",type:"text",required:u,className:"orddd-datepicker",label:v,placeholder:b,value:c,onBlur:e=>_(e),onChange:E}),(0,r.createElement)("small",{class:"orddd_lite_field_note"},orddd_lite_params.orddd_lite_field_note))});var c=d(609),_=d(184),u=d.n(_);const m=({checkoutData:e,updateSession:d,setLoading:n})=>{const[_,m]=(0,o.useState)(!0),[v,p]=(0,o.useState)([]),[y,h]=(0,o.useState)(""),[g,f]=(0,o.useState)((0,a.__)("Time Slot","order-delivery-date")),{setExtensionData:w}=e,[b,S]=(0,o.useState)(!1),[k,E]=(0,o.useState)(!0),{setValidationErrors:x,clearValidationError:I}=(0,l.useDispatch)(s.VALIDATION_STORE_KEY),D="orddd_lite_time_slot",j=(0,a.__)("Please select a time slot","order-delivery-date");(0,o.useEffect)((()=>{if("on"!==orddd_lite_params.orddd_lite_enable_time_slot&&E(!1),!k)return;let e="undefined"!==localStorage.getItem("orddd_lite_time_slot")?localStorage.getItem("orddd_lite_time_slot"):"select";h(e),m("checked"===orddd_lite_params.orddd_lite_time_slot_mandatory),f(orddd_lite_params.orddd_lite_delivery_timeslot_field_label),w("order-delivery-date","orddd_lite_time_slot",y),w("order-delivery-date","time_slot_mandatory",_),w("order-delivery-date","time_field_label",g),jQuery(document).on("orddd_lite_on_load_time_slots",(function(e,t){let d=[],a=(localStorage.getItem("orddd_lite_time_slot"),orddd_lite_params.orddd_lite_auto_populate_first_available_time_slot),r=t.split("/");for(i=0;i<r.length;i++){let e=r[i].split("_");"select"==e[0].replace(/\s/g,"")?d.push({label:jsL10n.selectText,value:"select"}):"asap"==e[0]?d.push({label:jsL10n.asapText,value:e[0]}):d.push({label:e[1],value:e[0]}),1===i&&"on"===a&&(h(e[1]),C(e[0]))}p(d)})),!_||y?I(D):x({[D]:{message:j,hidden:!0}}),I(D)}),[w,k,p,h,d,S,x,I]);const C=(0,o.useCallback)((e=>{h(e),localStorage.setItem("orddd_lite_time_slot",e),w("order-delivery-date","orddd_lite_time_slot",e),n(!0),(0,t.extensionCartUpdate)({namespace:"order-delivery-date",data:{orddd_lite_time_slot:e,h_deliverydate:localStorage.getItem("h_deliverydate_session")}}).then((()=>{n(!1)}))}),[h,w]),L=(0,l.useSelect)((e=>e(s.VALIDATION_STORE_KEY).getValidationError(D)));return k?(0,r.createElement)("div",{id:"orddd_lite_time_slot",className:u()("wc-block-components-combobox",{"is-active":y,"has-error":L?.message&&!L?.hidden})},(0,r.createElement)(c.ComboboxControl,{className:"wc-block-components-combobox-control",label:g,onChange:C,onFilterValueChange:()=>null,options:v,value:y||"",allowReset:!1,"aria-invalid":L?.message&&!L?.hidden}),(0,r.createElement)(t.ValidationInputError,{propertyName:D})):null},v=()=>(0,r.createElement)("span",{className:"wc-block-components-spinner","aria-hidden":"true"}),p=({children:e,className:t,screenReaderLabel:d,showSpinner:a=!1,isLoading:o=!0})=>(0,r.createElement)("div",{className:u()(t,{"wc-block-components-loading-mask":o})},o&&a&&(0,r.createElement)(v,null),(0,r.createElement)("div",{className:u()({"wc-block-components-loading-mask__children":o}),"aria-hidden":o},e),o&&(0,r.createElement)("span",{className:"screen-reader-text"},d||__("Loading…","woo-gutenberg-products-block"))),{registerCheckoutBlock:y}=wc.blocksCheckout;wcSettings.shippingEnabled&&!wcSettings.forcedBillingAddress?e.parent=["woocommerce/checkout-shipping-address-block"]:e.parent=["woocommerce/checkout-billing-address-block"],y({metadata:e,component:({children:e,checkoutExtensionData:t})=>{const[d,l]=(0,o.useState)(!0),{setExtensionData:i}=t,[s,c]=(0,o.useState)(""),[_,u]=(0,o.useState)(!1);(0,o.useEffect)((()=>{jQuery(document).ready((function(){jQuery("#e_deliverydate").val("").datepicker({dateFormat:orddd_lite_params.orddd_lite_delivery_date_format,firstDay:parseInt(orddd_lite_params.orddd_first_day_of_week),beforeShow:avd,beforeShowDay:chd,showButtonPanel:!0,closeText:jsL10n.clearText,onSelect:orddd_on_select_date,onClose:function(e,t){if(""!=e){t.selectedMonth;t.selectedDay,t.selectedYear}jQuery("#e_deliverydate").blur()}}).focus((function(e){jQuery(this).trigger("blur"),jQuery.datepicker.afterShow(e)})),window.onload=load_lite_functions()}))}),[]);const v=e=>{u(e)};return(0,r.createElement)(p,{isLoading:_,screenReaderLabel:(0,a.__)("Loading delivery date�","order-delivery-date"),showSpinner:!0},(0,r.createElement)("div",{className:"orddd-lite-checkout-fields"},(0,r.createElement)(n,{checkoutData:t,updateSession:s,setLoading:v}),(0,r.createElement)(m,{checkoutData:t,updateSession:s,setLoading:v}),(0,r.createElement)("input",{type:"hidden",id:"h_deliverydate",name:"h_deliverydate",value:""})))}})})()})();