(()=>{var e={485:(e,t)=>{var d;!function(){"use strict";var o={}.hasOwnProperty;function r(){for(var e=[],t=0;t<arguments.length;t++){var d=arguments[t];if(d){var a=typeof d;if("string"===a||"number"===a)e.push(d);else if(Array.isArray(d)&&d.length){var l=r.apply(null,d);l&&e.push(l)}else if("object"===a)for(var i in d)o.call(d,i)&&d[i]&&e.push(i)}}return e.join(" ")}e.exports?(r.default=r,e.exports=r):void 0===(d=function(){return r}.apply(t,[]))||(e.exports=d)}()},609:e=>{"use strict";e.exports=window.React},0:e=>{"use strict";e.exports=window.wc.blocksCheckout},427:e=>{"use strict";e.exports=window.wp.components},723:e=>{"use strict";e.exports=window.wp.i18n},195:e=>{"use strict";e.exports=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":2,"name":"order-delivery-date/delivery-date","version":"1.0.1","title":"Order Delivery Date","category":"woocommerce","parent":["woocommerce/checkout-fields-block","woocommerce/checkout-totals-block","woocommerce/checkout-contact-information-block","woocommerce/checkout-shipping-address-block","woocommerce/checkout-billing-address-block","woocommerce/checkout-shipping-methods-block","woocommerce/checkout-pickup-options-block","woocommerce/checkout-payment-block","woocommerce/checkout-order-summary-block"],"supports":{"html":false,"multiple":true,"reusable":false,"inserter":true},"textdomain":"order-delivery-date","editorScript":"file:./build/index.js"}')}},t={};function d(o){var r=t[o];if(void 0!==r)return r.exports;var a=t[o]={exports:{}};return e[o](a,a.exports,d),a.exports}d.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return d.d(t,{a:t}),t},d.d=(e,t)=>{for(var o in t)d.o(t,o)&&!d.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},d.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=d(195),t=d(723),o=d(609);const r=window.wp.element,a=window.wp.data,l=window.wc.wcBlocksData;window.wc.wcSettings;var s=d(0);const c=({checkoutData:e,shippingMethod:d,updateSession:i,setLoading:c})=>{const[n,_]=(0,r.useState)(""),[u,m]=(0,r.useState)(!0),[p,v]=(0,r.useState)((0,t.__)("Delivery Date","order-delivery-date")),{setExtensionData:y}=e,{setValidationErrors:h,clearValidationError:g}=(0,a.useDispatch)(l.VALIDATION_STORE_KEY),[b,k]=(0,r.useState)(!0),[w,f]=(0,r.useState)((0,t.__)("Choose a Date","order-delivery-date"));(0,r.useEffect)((()=>{k(orddd_lite_params.is_enable_delivery_date),v(orddd_lite_params.orddd_lite_delivery_date_field_label),_(localStorage.getItem("orddd_deliverydate_lite_session")),y("order-delivery-date","e_deliverydate",n),y("order-delivery-date","h_deliverydate",localStorage.getItem("h_deliverydate_lite_session")),m("checked"===orddd_lite_params.orddd_lite_date_field_mandatory),f(orddd_lite_params.orddd_lite_delivery_date_field_placeholder),b&&(setTimeout((()=>{_(localStorage.getItem("orddd_deliverydate_lite_session")),y("order-delivery-date","e_deliverydate",n),y("order-delivery-date","h_deliverydate",localStorage.getItem("h_deliverydate_lite_session"))}),3e3),jQuery(document).on("orddd_lite_on_select_date",(function(e,t){_(t)})),jQuery(document).on("change","#orddd_lite_datepicker",(function(e){_(e.target.value),y("order-delivery-date","e_deliverydate",e.target.value),y("order-delivery-date","h_deliverydate",localStorage.getItem("h_deliverydate_lite_session")),c(!0),(0,s.extensionCartUpdate)({namespace:"order-delivery-date",data:{e_deliverydate:e.target.value,h_deliverydate:localStorage.getItem("h_deliverydate_lite_session")}}).then((()=>{c(!1)}))})),jQuery(document).on("orddd_on_clear_text",(function(){c(!0),(0,s.extensionCartUpdate)({namespace:"order-delivery-date",data:{e_deliverydate:"",h_deliverydate:""}}).then((()=>{localStorage.setItem("h_deliverydate_lite_session",""),localStorage.setItem("orddd_deliverydate_lite_session",""),_(""),c(!1)}))})),u&&""===n?h({e_deliverydate:{message:(0,t.__)("Please select a delivery date","order-delivery-date"),hidden:!1}}):g("e_deliverydate"))}),[y,n,u,b,_,d,i,h,g]);const{validationError:S}=(0,a.useSelect)((e=>({validationError:e("wc/store/validation").getValidationError("e_deliverydate")}))),E=(0,r.useCallback)((e=>{_(e),y("order-delivery-date","e_deliverydate",e),y("order-delivery-date","h_deliverydate",localStorage.getItem("h_deliverydate_lite_session"))}),[_.setExtensionData]);return(0,o.createElement)("div",{style:{display:b?"block":"none"}},(0,o.createElement)(s.ValidatedTextInput,{id:"e_deliverydate",errorId:"e_deliverydate",type:"text",required:u,className:"orddd-datepicker",label:p,placeholder:w,value:n,onBlur:e=>_(e),onChange:E}),(0,o.createElement)("small",{class:"orddd_lite_field_note"},orddd_lite_params.orddd_lite_field_note))};var n=d(427),_=d(485),u=d.n(_);const m=({checkoutData:e,updateSession:d,setLoading:c})=>{const[_,m]=(0,r.useState)(!0),[p,v]=(0,r.useState)([]),[y,h]=(0,r.useState)(""),[g,b]=(0,r.useState)((0,t.__)("Time Slot","order-delivery-date")),{setExtensionData:k}=e,[w,f]=(0,r.useState)(!1),[S,E]=(0,r.useState)(!0),{setValidationErrors:x,clearValidationError:I}=(0,a.useDispatch)(l.VALIDATION_STORE_KEY),D="orddd_lite_time_slot",j=(0,t.__)("Please select a time slot","order-delivery-date");(0,r.useEffect)((()=>{if("on"!==orddd_lite_params.orddd_lite_enable_time_slot&&E(!1),!S)return;let e="undefined"!==localStorage.getItem("orddd_lite_time_slot")?localStorage.getItem("orddd_lite_time_slot"):"select";h(e),m("checked"===orddd_lite_params.orddd_lite_time_slot_mandatory),b(orddd_lite_params.orddd_lite_delivery_timeslot_field_label),L(y),k("order-delivery-date","orddd_lite_time_slot",y),k("order-delivery-date","time_slot_mandatory",_),k("order-delivery-date","time_field_label",g),jQuery(document).on("orddd_lite_on_load_time_slots",(function(e,t){let d=[],o=(localStorage.getItem("orddd_lite_time_slot"),orddd_lite_params.orddd_lite_auto_populate_first_available_time_slot),r=t.split("/");for(i=0;i<r.length;i++){let e=r[i].split("_");"select"==e[0].replace(/\s/g,"")?d.push({label:jsL10n.selectText,value:"select"}):"asap"==e[0]?d.push({label:jsL10n.asapText,value:e[0]}):d.push({label:e[1],value:e[0]}),1===i&&"on"===o&&(h(e[1]),L(e[0]))}v(d)})),!_||y?I(D):x({[D]:{message:j,hidden:!0}}),I(D)}),[k,S,v,h,d,f,x,I]);const L=(0,r.useCallback)((e=>{h(e),localStorage.setItem("orddd_lite_time_slot",e),k("order-delivery-date","orddd_lite_time_slot",e),c(!0),(0,s.extensionCartUpdate)({namespace:"order-delivery-date",data:{orddd_lite_time_slot:e,h_deliverydate:localStorage.getItem("h_deliverydate_lite_session")}}).then((()=>{c(!1)}))}),[h,k]),C=(0,a.useSelect)((e=>e(l.VALIDATION_STORE_KEY).getValidationError(D)));return S?(0,o.createElement)("div",{id:"orddd_lite_time_slot",className:u()("wc-block-components-combobox",{"is-active":y,"has-error":C?.message&&!C?.hidden})},(0,o.createElement)(n.ComboboxControl,{className:"wc-block-components-combobox-control",label:g,onChange:L,onFilterValueChange:()=>null,options:p,value:y||"",allowReset:!1,"aria-invalid":C?.message&&!C?.hidden}),(0,o.createElement)(s.ValidationInputError,{propertyName:D})):null},p=()=>(0,o.createElement)("span",{className:"wc-block-components-spinner","aria-hidden":"true"}),v=({children:e,className:t,screenReaderLabel:d,showSpinner:r=!1,isLoading:a=!0})=>(0,o.createElement)("div",{className:u()(t,{"wc-block-components-loading-mask":a})},a&&r&&(0,o.createElement)(p,null),(0,o.createElement)("div",{className:u()({"wc-block-components-loading-mask__children":a}),"aria-hidden":a},e),a&&(0,o.createElement)("span",{className:"screen-reader-text"},d||__("Loading…","woo-gutenberg-products-block"))),{registerCheckoutBlock:y}=wc.blocksCheckout;orddd_block_params.is_orddd_block_present||(wcSettings.shippingEnabled&&!wcSettings.forcedBillingAddress?e.parent=["woocommerce/checkout-shipping-address-block"]:e.parent=["woocommerce/checkout-billing-address-block"],wcSettings.localPickupEnabled&&wcSettings.delivery_date_data.wc_pickup_locations&&(e.parent=["woocommerce/checkout-pickup-options-block","woocommerce/checkout-shipping-address-block"]),e.attributes={lock:{type:"object",default:{remove:!0,move:!0}}}),y({metadata:e,component:({children:e,checkoutExtensionData:d})=>{const[a,l]=(0,r.useState)(!0),{setExtensionData:i}=d,[s,n]=(0,r.useState)(""),[_,u]=(0,r.useState)(!1);(0,r.useEffect)((()=>{jQuery(document).ready((function(){jQuery("#e_deliverydate").val("").datepicker({dateFormat:orddd_lite_params.orddd_lite_delivery_date_format,firstDay:parseInt(orddd_lite_params.orddd_first_day_of_week),beforeShow:avd,beforeShowDay:chd,showButtonPanel:!0,closeText:jsL10n.clearText,onSelect:orddd_on_select_date,onClose:function(e,t){if(""!=e){t.selectedMonth;t.selectedDay,t.selectedYear}jQuery("#e_deliverydate").blur()}}).focus((function(e){jQuery(this).trigger("blur"),jQuery.datepicker.afterShow(e)})),window.onload=load_lite_functions()}))}),[]);const p=e=>{u(e)};return orddd_lite_params.is_enable_delivery_date_for_virtual_product||orddd_lite_params.is_enable_delivery_date_for_featured_product?null:(0,o.createElement)(v,{isLoading:_,screenReaderLabel:(0,t.__)("Loading delivery date�","order-delivery-date"),showSpinner:!0},(0,o.createElement)("div",{className:"orddd-lite-checkout-fields"},(0,o.createElement)(c,{checkoutData:d,updateSession:s,setLoading:p}),(0,o.createElement)(m,{checkoutData:d,updateSession:s,setLoading:p}),(0,o.createElement)("input",{type:"hidden",id:"h_deliverydate",name:"h_deliverydate",value:""})))}})})()})();